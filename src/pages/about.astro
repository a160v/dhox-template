---
import BaseLayout from "../layouts/BaseLayout.astro";
import Timeline from "../components/Timeline.astro";
import Footer from "../components/Footer.astro";
import Icon from "../components/Icon.astro";
import ObfuscatedEmailLink from "../components/ObfuscatedEmailLink.astro";
import { SITE_TITLE, SOCIAL_LINKS } from "../consts";

// Breadcrumb data for footer
const breadcrumbs = [{ label: "Home", href: "/" }, { label: "About" }];

// ==============================================
// TODO: Edit this data to tell YOUR story
// ==============================================
const aboutData = {
  title: "My Story", // TODO: Your headline
  subtitle: "A brief tagline about yourself and what drives you.", // TODO: Your subtitle
  intro:
    "Let me tell you my story. <strong>This is where you introduce yourself</strong> and explain what makes you unique.", // TODO: Your intro

  // TODO: Replace with your own timeline entries
  timeline: [
    {
      date: "2024 – Present",
      title: "Current Role or Project",
      variant: "default",
      content:
        "Describe what you're currently working on. Use <strong>bold</strong> for emphasis.",
    },
    {
      date: "2022 – 2024",
      title: "Previous Experience",
      variant: "default",
      content:
        "Describe a previous role, education, or significant life event.",
    },
    {
      date: "2020 – 2022",
      title: "Another Milestone",
      variant: "default",
      content: "Continue building your story with key moments that shaped you.",
    },
    {
      date: "2018 – 2020",
      title: "The Beginning",
      variant: "default",
      content:
        "Where did your journey start? Education, first job, or a pivotal moment.",
    },
  ],

  // TODO: List your key skills
  skills: [
    "<strong>Skill Category 1</strong>, with specific expertise",
    "<strong>Skill Category 2</strong>, describing your capability",
    "<strong>Skill Category 3</strong>, what you bring to the table",
    "<strong>Skill Category 4</strong>, your unique strength",
  ],

  // TODO: List your languages (or remove if not relevant)
  languages: [
    { name: "English", level: "native" },
    { name: "Spanish", level: "B2" },
    { name: "French", level: "A2" },
  ],

  conclusion:
    "Wrap up your story here. <strong>What makes you unique?</strong> What are you looking for?", // TODO: Your conclusion
} as const;
---

<BaseLayout
  title={`About – ${SITE_TITLE}`}
  description={aboutData.subtitle || "About me"}
>
  <main>
    <article class="about">
      <!-- Hero Section -->
      <header class="about-header reveal">
        <div class="avatar-container">
          <div class="avatar-placeholder">
            <Icon
              icon="user-line.svg"
              size="64px"
              color="var(--color-text-muted)"
            />
          </div>
        </div>
        <h1 class="about-title">{aboutData.title}</h1>
        <p class="about-subtitle">{aboutData.subtitle}</p>
      </header>

      <!-- Introduction -->
      <section class="bio reveal">
        <p
          class="lead"
          set:html={aboutData.intro?.replace(
            /\*\*(.*?)\*\*/g,
            "<strong>$1</strong>",
          )}
        />
      </section>

      <!-- Timeline -->
      <section class="timeline-section reveal">
        <Timeline entries={aboutData.timeline || []} />
      </section>

      <!-- What I Bring -->
      <section class="story-section reveal">
        <h2>What I Bring</h2>
        <ul class="skills-list">
          {
            aboutData.skills?.map((skill: string) => (
              <li
                set:html={skill.replace(
                  /\*\*(.*?)\*\*/g,
                  "<strong>$1</strong>",
                )}
              />
            ))
          }
        </ul>

        <div class="languages-box">
          <h3>Languages</h3>
          <p>
            {
              aboutData.languages?.map(
                (lang: { name: string; level: string }) => (
                  <span class={`lang-tag ${lang.level.toLowerCase()}`}>
                    {lang.name}
                    {lang.level !== "native" ? ` (${lang.level})` : ""}
                  </span>
                ),
              )
            }
          </p>
        </div>
      </section>

      <!-- Conclusion -->
      <section class="story-section final-section reveal">
        <h2>What This All Means</h2>
        <p
          class="conclusion"
          set:html={aboutData.conclusion?.replace(
            /\*\*(.*?)\*\*/g,
            "<strong>$1</strong>",
          )}
        />
      </section>

      <!-- Connect Section -->
      <section class="connect reveal">
        <h2>Let's Connect</h2>
        <p class="connect-intro">Find me online or reach out via email.</p>

        <div class="social-links">
          <a
            href={SOCIAL_LINKS.github}
            target="_blank"
            rel="noopener noreferrer"
            class="social-link"
          >
            <span class="social-icon">
              <Icon icon="github-fill.svg" size="24px" />
            </span>
            <span class="social-label">
              <span class="social-name">GitHub</span>
              <span class="social-handle">@yourusername</span>
            </span>
          </a>

          <a
            href={SOCIAL_LINKS.linkedin}
            target="_blank"
            rel="noopener noreferrer"
            class="social-link"
          >
            <span class="social-icon">
              <Icon icon="linkedin-fill.svg" size="24px" />
            </span>
            <span class="social-label">
              <span class="social-name">LinkedIn</span>
              <span class="social-handle">yourusername</span>
            </span>
          </a>

          <ObfuscatedEmailLink class="social-link" ariaLabel="Send email">
            <span class="social-icon">
              <Icon icon="mail-send-line.svg" size="24px" />
            </span>
            <span class="social-label">
              <span class="social-name">Email</span>
              <span class="social-handle">Get in touch</span>
            </span>
          </ObfuscatedEmailLink>
        </div>
      </section>
    </article>

    <Footer breadcrumbs={breadcrumbs} />
  </main>
</BaseLayout>

<style>
  main {
    padding-top: var(--space-12);
    padding-bottom: var(--space-16);
    max-width: 850px;
  }

  .about {
    margin: 0 auto;
  }

  /* Header */
  .about-header {
    text-align: center;
    margin-bottom: var(--space-12);
  }

  .avatar-container {
    margin-bottom: var(--space-6);
  }

  .avatar-placeholder {
    width: 120px;
    height: 120px;
    margin: 0 auto;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-surface), var(--color-bg));
    border: 2px solid var(--color-border);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text-muted);
  }

  .about-title {
    font-size: var(--text-3xl);
    margin-bottom: var(--space-4);
    line-height: 1.2;
  }

  .about-subtitle {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    margin: 0;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Bio intro */
  .bio {
    margin-bottom: var(--space-10);
    text-align: center;
  }

  .lead {
    font-size: var(--text-xl);
    line-height: 1.7;
    color: var(--color-text);
    max-width: 600px;
    margin: 0 auto;
  }

  /* Timeline section */
  .timeline-section {
    margin-bottom: var(--space-12);
  }

  /* Story sections */
  .story-section {
    margin-bottom: var(--space-12);
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }

  .story-section h2 {
    font-size: var(--text-2xl);
    margin-bottom: var(--space-4);
    color: var(--color-text);
  }

  .story-section p {
    font-size: var(--text-base);
    line-height: 1.8;
    margin-bottom: var(--space-4);
  }

  /* Skills list */
  .skills-list {
    list-style: none;
    padding: 0;
    margin: var(--space-4) 0;
  }

  .skills-list li {
    position: relative;
    padding-left: var(--space-6);
    margin-bottom: var(--space-3);
    line-height: 1.7;
  }

  .skills-list li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.6em;
    width: 8px;
    height: 8px;
    background: var(--color-accent);
    border-radius: 50%;
  }

  /* Languages */
  .languages-box {
    margin-top: var(--space-8);
    padding: var(--space-5);
    background: var(--color-surface);
    border-radius: var(--radius-xl);
    border: 1px solid var(--color-border);
  }

  .languages-box h3 {
    font-size: var(--text-lg);
    margin-bottom: var(--space-3);
  }

  .languages-box p {
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }

  .lang-tag {
    display: inline-block;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    font-weight: 500;
  }

  .lang-tag.native {
    background: var(--color-accent);
    color: white;
  }

  .lang-tag.c2 {
    background: rgba(0, 113, 227, 0.15);
    color: var(--color-accent);
  }

  .lang-tag.b2,
  .lang-tag.b1 {
    background: var(--color-border);
    color: var(--color-text);
  }

  .lang-tag.a2,
  .lang-tag.a1 {
    background: var(--color-code-bg);
    color: var(--color-text-muted);
  }

  /* Final section */
  .final-section {
    padding-top: var(--space-8);
    border-top: 1px solid var(--color-border);
  }

  .conclusion {
    font-size: var(--text-lg);
  }

  /* Connect section */
  .connect {
    padding-top: var(--space-10);
    margin-top: var(--space-12);
    border-top: 1px solid var(--color-border);
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }

  .connect h2 {
    font-size: var(--text-2xl);
    margin-bottom: var(--space-2);
  }

  .connect-intro {
    color: var(--color-text-muted);
    margin-bottom: var(--space-6);
  }

  @media (max-width: 640px) {
    main {
      padding-top: var(--space-8);
    }

    .about-title {
      font-size: var(--text-2xl);
    }

    .lead {
      font-size: var(--text-lg);
    }

    .lang-tag {
      font-size: var(--text-xs);
    }
  }
</style>
